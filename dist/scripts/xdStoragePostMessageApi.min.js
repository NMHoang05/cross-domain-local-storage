(function(){function d(b,a){var c=XdUtils.extend(a,h);c.id=b;parent.postMessage(JSON.stringify(c),"*")}function g(b){var a;try{a=JSON.parse(b.data)}catch(c){}a&&"cross-domain-local-message"===a.namespace&&("local"==a.type&&("set"===a.action?e.setData(a.id,a.key,a.value):"get"===a.action?e.getData(a.id,a.key):"remove"===a.action?e.removeData(a.id,a.key):"key"===a.action?e.getKey(a.id,a.key):"size"===a.action?e.getSize(a.id):"length"===a.action?e.getLength(a.id):"clear"===a.action&&e.clear(a.id)),"session"==
a.type&&("set"===a.action?f.setData(a.id,a.key,a.value):"get"===a.action?f.getData(a.id,a.key):"remove"===a.action?f.removeData(a.id,a.key):"key"===a.action?f.getKey(a.id,a.key):"size"===a.action?f.getSize(a.id):"length"===a.action?f.getLength(a.id):"clear"===a.action&&f.clear(a.id)))}var h={namespace:"cross-domain-local-message"},e={getData:function(b,a){var c=localStorage.getItem(a);d(b,{key:a,value:c})},setData:function(b,a,c){localStorage.setItem(a,c);a={success:localStorage.getItem(a)===c};d(b,
a)},removeData:function(b,a){localStorage.removeItem(a);d(b,{})},getKey:function(b,a){var c=localStorage.key(a);d(b,{key:c})},getSize:function(b){var a=JSON.stringify(localStorage).length;d(b,{size:a})},getLength:function(b){d(b,{length:localStorage.length})},clear:function(b){localStorage.clear();d(b,{})}},f={getData:function(b,a){var c=sessionStorage.getItem(a);d(b,{key:a,value:c})},setData:function(b,a,c){sessionStorage.setItem(a,c);a={success:sessionStorage.getItem(a)===c};d(b,a)},removeData:function(b,
a){sessionStorage.removeItem(a);d(b,{})},getKey:function(b,a){var c=sessionStorage.key(a);d(b,{key:c})},getSize:function(b){var a=JSON.stringify(sessionStorage).length;d(b,{size:a})},getLength:function(b){d(b,{length:sessionStorage.length})},clear:function(b){sessionStorage.clear();d(b,{})}};window.addEventListener?window.addEventListener("message",g,!1):window.attachEvent("onmessage",g);parent.postMessage(JSON.stringify({namespace:"cross-domain-local-message",id:"iframe-ready"}),"*")})();

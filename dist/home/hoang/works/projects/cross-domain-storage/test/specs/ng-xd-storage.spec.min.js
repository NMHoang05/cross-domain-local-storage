describe("xdStorage test",function(){beforeEach(function(){module("xdStorage")});afterEach(inject(function(b){b.local.clear()}));it("should get item after init",function(b){inject(function(a){var c=jasmine.createSpy();a.init({iframeUrl:"base/app/views/cross-domain-storage.html"}).then(function(){c()});a.local.setItem("myLocalKey",1).then(function(){a.local.getItem("myLocalKey").then(function(a){expect(a.value).toBe("1");expect(c).toHaveBeenCalled();b()})});a.session.setItem("mySessionKey",1).then(function(){a.session.getItem("mySessionKey").then(function(a){expect(a.value).toBe("1");
expect(c).toHaveBeenCalled();b()})})})})});
